name: Windows Server 2019
run-name: Ch√†o m·ª´ng ${{ github.actor }} ƒë·∫øn v·ªõi Rinne VPS üöÄ
on:
  workflow_dispatch:
    inputs:
      os:
        description: 'Nh·∫≠p token Ngrok'
        required: true
      os2:
        description: 'Nh·∫≠p m·∫≠t kh·∫©u'
        required: true
      os4:
        description: 'T·∫°o t√™n ng∆∞·ªùi d√πng ri√™ng'
        required: false
      os3:
        description: '(Tu·ª≥ Ch·ªçn) Nh·∫≠p c√°c g√≥i ·ªü Chocolatey, v√≠ d·ª• "firefox googlechrome vlc aegisub handbrake..." '
        required: false
jobs:
  Windows_Server_2019:
    timeout-minutes: 360
    runs-on: windows-2019
    name: ƒêang ch·∫°y
    steps:
    - name: T·∫£i code c·∫•u h√¨nh...
      uses: actions/checkout@v1
      timeout-minutes: 360
    - name: T·∫°o t√†i kho·∫£n
      run: |
            powershell.exe -File 1.ps1 > $null
            echo Kh√¥ng ƒë·ªïi ƒë∆∞·ª£c m·∫≠t kh·∫©u Administrator, s·ª≠ d·ª•ng quy·ªÅn Administrator v√† kh√¥ng ƒë∆∞·ª£c ƒë·ªïi m·∫≠t kh·∫©u
            
            net.exe user installer ${{ github.event.inputs.os2 }}
            net user ${{ github.event.inputs.os4 }} ${{ github.event.inputs.os2 }} /add 
            net localgroup administrators ${{ github.event.inputs.os4 }} /add
            
      timeout-minutes: 360
    - name: Setup cho Ngrok v√† Remote Desktop
      run: |
            powershell.exe -File 2.ps1
            ngrok authtoken ${{ github.event.inputs.os }}
    - name: Ch·∫°y Ngrok
      shell: bash
      run: bash 3389.sh
      timeout-minutes: 360
    - name: Sau ƒë√¢y l√† m·∫≠t kh·∫©u v√† username
      run: |
            write-host Username: $env:UserName
            write-host Username: installer
            write-host Password: HI·ªÇN TH·ªä M·∫¨T KH·∫®U ƒê√É B·ªä XO√Å V√å L√ç DO B·∫¢O M·∫¨T

         
      timeout-minutes: 360
    - name: Nh·∫≠n IP VPS
      run: |
            write-host IP L√Ä:
            curl -s localhost:4040/api/tunnels | jq -r .tunnels[0].public_url || echo "L·ªói token"
            
            echo "T√≠nh nƒÉng chocolatey ƒëang b·ªã b·∫£o tr√¨"
            
      timeout-minutes: 360
    - name: Th√†nh c√¥ng!
      run: |
            sleep 200
            sleep 200
            sleep 200
            sleep 200
            sleep 200
            sleep 200
            sleep 200
            sleep 200
            sleep 200
            sleep 200
            sleep 200
            sleep 200
            sleep 200
            bash Nn.sh
      timeout-minutes: 999
